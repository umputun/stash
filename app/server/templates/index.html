{{define "content"}}
<div class="header">
    <h1><svg class="logo-icon" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path fill="currentColor" d="M7 12.25h10v-2H7zm0-3.5h10v-2H7zM3 21V3h18v18zm2-2h14v-3h-3q-.75.95-1.787 1.475T12 18t-2.212-.525T8 16H5zm7-3q.95 0 1.725-.55T14.8 14H19V5H5v9h4.2q.3.9 1.075 1.45T12 16m-7 3h14z"/></svg>Stash</h1>
    <div class="header-actions">
        <button class="sort-button"
                hx-post="/web/sort"
                hx-target="#keys-table"
                hx-swap="innerHTML"
                hx-include="[name='search']"
                title="Change sort order">
            <svg width="14" height="14" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path d="M3 6h18M3 12h12M3 18h6" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
            </svg>
            <span id="sort-label">{{.SortMode | sortModeLabel}}</span>
        </button>
        <input type="search"
               name="search"
               placeholder="Search keys..."
               hx-get="/web/keys"
               hx-trigger="input changed delay:300ms, search"
               hx-target="#keys-table"
               hx-swap="innerHTML"
               class="search-input">
        <button class="btn btn-primary"
                hx-get="/web/keys/new"
                hx-target="#modal-content"
                hx-swap="innerHTML">
            + New Key
        </button>
        <button class="btn-icon"
                hx-post="/web/view-mode"
                hx-target="#keys-table"
                hx-swap="innerHTML"
                hx-include="[name='search']"
                title="Toggle view mode">
            {{if eq .ViewMode "cards"}}☰{{else}}☷{{end}}
        </button>
        <form hx-post="/web/theme" hx-swap="none">
            <button type="submit" class="btn-icon" title="Toggle theme">
                {{if eq .Theme "dark"}}☀{{else}}☾{{end}}
            </button>
        </form>
        {{if .AuthEnabled}}
        <form method="POST" action="/logout">
            <button type="submit" class="btn-icon btn-logout" title="Logout">
                ⏻
            </button>
        </form>
        {{end}}
    </div>
</div>

<div class="stats">
    <span id="key-count">{{if eq (len .Keys) 0}}no keys{{else}}{{len .Keys}} {{if eq (len .Keys) 1}}key{{else}}keys{{end}}{{end}}</span>
</div>

<div class="table-container">
    <div id="keys-table">
        {{template "keys-table" .}}
    </div>
</div>
{{end}}
